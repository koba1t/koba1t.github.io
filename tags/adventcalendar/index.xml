<?xml version="1.0" encoding="utf-8" standalone="yes"?><rss version="2.0" xmlns:atom="http://www.w3.org/2005/Atom"><channel><title>AdventCalendar on kob | blog</title><link>https://www.k06.in/tags/adventcalendar/</link><description>Recent content in AdventCalendar on kob | blog</description><generator>Hugo -- gohugo.io</generator><language>ja-JP</language><lastBuildDate>Sun, 22 Dec 2019 04:15:18 +0900</lastBuildDate><atom:link href="https://www.k06.in/tags/adventcalendar/index.xml" rel="self" type="application/rss+xml"/><item><title>kubernetes-event-exporterを使ってslackへEventを通知する</title><link>https://www.k06.in/posts/send_to_slack_with_kubernetes-event-exporter/</link><pubDate>Sun, 22 Dec 2019 04:15:18 +0900</pubDate><guid>https://www.k06.in/posts/send_to_slack_with_kubernetes-event-exporter/</guid><description>kubernetes-event-exporter を使って slack へ Event を通知する この記事は信州大学 kstm Advent Calendar 2019の21日目です。UTCだとまだ2019/12/21です。
はじめに この前の kubecon 2019 NA で発表のあった kubernetes-event-exporter を使用してkubernetesのEventをslackへ通知する方法を試してみます。
kubernetes Eventとは EventとはkubernetesのClusterの中で実際に何がおこっているかの情報で、terminalからkubectl get eventで取得できます。 ただ、このEventの情報は1時間経過すると削除されてしまうので、後からkubernetes上で参照するのは難しかったりします。
kubernetes-event-exporterは発生したEventのフィルタリング、ルーティングを行なってくれるツールで、ElasticsearchやslackなどにEventの情報を送ってくれます。
install まずセットアップに必要なfileを kubernetes-event-exporter/deploy から取得します。
00-roles.yaml 01-config.yaml 02-deployment.yaml 01-config.yaml を編集することで、通知のフィルタリングや送信先を設定できます。
slackに通知を送るためには、以下のように01-config.yamlを編集します。 設定にslackのtokenが必要になるので事前に発行しておきましょう。 また、通知を送る先のチャンネルも用意します。(ここではkube-alertというチャンネルを指定しています)
apiVersion: v1 kind: ConfigMap metadata: name: event-exporter-cfg namespace: monitoring data: config.yaml: | route: match: - receiver: &amp;quot;slack&amp;quot; receivers: - name: &amp;quot;slack&amp;quot; slack: token: &amp;quot;xoxb-xxxxxxxxxxxxxxxxxxxxx&amp;quot; channel: &amp;quot;kube-alert&amp;quot; message: &amp;quot;{{ .Message}}&amp;quot; fields: namespace: &amp;quot;{{ .</description></item><item><title>mpvとyoutube-dlでconsoleをyoutubeオーディオプレーヤーにする</title><link>https://www.k06.in/posts/mpv_and_youtube-dl/</link><pubDate>Fri, 14 Dec 2018 05:14:47 +0900</pubDate><guid>https://www.k06.in/posts/mpv_and_youtube-dl/</guid><description>mpvとyoutube-dlでconsoleをyoutubeオーディオプレーヤーにする この記事は信州大学 kstm Advent Calendar 2018の14日目です
はじめに youtubeなどの動画サイトでBGMを作業用に流すことはよくあることだと思うのですが, 皆さん,browserで再生しますよね?
browserを開いているとtwitterやredditなどの無関係なページ1をついつい見てしまって作業が進まないことってありませんか?
そんな事態を減らすためにconsoleでBGMを再生してbrowserを必要な時以外は閉じてしまいましょう
インストール 使うツールはmpvとyoutube-dlです
mpvはオープンソースのコマンドラインメディアプレーヤー youtube-dlはその名前の通りyoutubeの動画2をダウンロードするツール 組み合わせて使えばストリーミングしながら再生することができます debianやubuntuは最近のversionじゃないと対応してないかもしれません
## ArchLinux sudo pacman -S mpv youtube-dl ## debian,ubuntu sudo apt install mpv youtube-dl ## macの場合はこれで入るらしいです(未検証) brew install youtube-dl brew install mpv --with-bundle mpvの操作方法はこのページにあります consoleから再生できるのでRaspberry Piでメディアプレーヤを簡単に作ったり,用途は多そうです
使いかた 実際にconsoleから再生しましょう urlをmpvに渡すだけでyoutube-dlを呼んでくれます
## youtubeの動画 mpv --no-video --ytdl-format=bestaudio https://www.youtube.com/watch?v=kbjhO3iX1GY ## niconicoの動画やマイリストからの再生もできます mpv --no-video https://www.nicovideo.jp/watch/sm34236420 mpv --no-video https://www.nicovideo.jp/mylist/49902704 ## soundcloudも再生できます mpv --no-video https://soundcloud.com/user-185628379/japanese-piano-style mpv --no-video https://soundcloud.com/user-185628379 ## youtubeから検索した動画を流すこともできます mpv --no-video --ytdl-format=bestaudio ytdl://ytsearch10:&amp;quot;Maurice Ravel&amp;quot; また,このツールは他にも大量のサイトに対応しているらしいです。</description></item></channel></rss>